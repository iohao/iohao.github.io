"use strict";(self.webpackChunkio_game_doc=self.webpackChunkio_game_doc||[]).push([[4265],{1300:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"extension_module/profile","title":"profile \u591a\u73af\u5883\u5207\u6362","description":"\u4ecb\u7ecd","source":"@site/docs/extension_module/profile.mdx","sourceDirName":"extension_module","slug":"/extension_module/profile","permalink":"/game/en/docs/extension_module/profile","draft":false,"unlisted":false,"editUrl":"/docs/extension_module/profile.mdx","tags":[],"version":"current","lastUpdatedAt":1750419644000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Generate-code \u4ee3\u7801\u751f\u6210","permalink":"/game/en/docs/extension_module/generate_code"},"next":{"title":"\u673a\u5668\u4eba\u89e3\u51b3\u65b9\u6848","permalink":"/game/en/docs/extension_module/robot"}}');var i=o(4848),l=o(8453);const s={sidebar_position:10},t="profile \u591a\u73af\u5883\u5207\u6362",a={},c=[{value:"\u4ecb\u7ecd",id:"Intro",level:2},{value:"\u6982\u5ff5\u4ecb\u7ecd",id:"Concept-Introduction",level:2},{value:"\u5982\u4f55\u5b89\u88c5",id:"How-To-Install",level:2},{value:"Example",id:"example",level:2},{value:"Spring Example",id:"spring-example",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"profile-\u591a\u73af\u5883\u5207\u6362",children:"profile \u591a\u73af\u5883\u5207\u6362"})}),"\n",(0,i.jsx)(n.h2,{id:"Intro",children:"\u4ecb\u7ecd"}),"\n",(0,i.jsx)(n.p,{children:"\u65e0\u9700\u4fee\u6539\u4ee3\u7801\u5b9e\u73b0\uff08\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u90e8\u7f72\uff09\u914d\u7f6e\u95f4\u7684\u5207\u6362\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"Concept-Introduction",children:"\u6982\u5ff5\u4ecb\u7ecd"}),"\n",(0,i.jsx)(n.p,{children:"profile \u652f\u6301\u6982\u8981\u6587\u4ef6\u7684\u6982\u5ff5\uff0c\u5b83\u5141\u8bb8\u60a8\u5728\u4e0d\u540c\u7684\u73af\u5883\u4e2d\u8f7b\u677e\u5730\u7ec4\u7ec7\u914d\u7f6e(\u7531\u6982\u8981\u6587\u4ef6\u5b9a\u4e49)\u3002\n\u770b\u770b\u4e0b\u9762\u7684\u914d\u7f6e\uff0c\u6765\u81ea\u6211\u4eec\u7684\u4e00\u4e2a\u771f\u5b9e\u9879\u76ee\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"resources\n\u2514\u2500\u2500 conf\n    \u251c\u2500\u2500 common\n    \u2502   \u251c\u2500\u2500 db.props\n    \u2502   \u2514\u2500\u2500 other.props\n    \u251c\u2500\u2500 local\n    \u2502   \u2514\u2500\u2500 db.props\n    \u2514\u2500\u2500 production\n        \u251c\u2500\u2500 db.props\n        \u2514\u2500\u2500 other.props\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5047\u8bbe\u5728 ",(0,i.jsx)(n.strong,{children:"local"})," \u670d\u52a1\u5668\u4e0a\uff0c\u4f60\u7528 JVM \u9009\u9879 ",(0,i.jsx)(n.code,{children:"-Diohao.profile=local"})," \u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\uff0c\u5c06\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u52a0\u8f7d\u914d\u7f6e"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8bfb\u53d6 /resources/conf/",(0,i.jsx)(n.strong,{children:"common"})," \u76ee\u5f55\u4e0b\u7684\u6240\u6709 .props \u6587\u4ef6"]}),"\n",(0,i.jsxs)(n.li,{children:["\u8bfb\u53d6 /resources/conf/",(0,i.jsx)(n.strong,{children:"local"})," \u76ee\u5f55\u4e0b\u6240\u6709\u7684 .props \u6587\u4ef6"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u6837\uff0c\u4f7f\u7528 ",(0,i.jsx)(n.strong,{children:"local"})," \u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u914d\u7f6e\u9879\u6765\u8986\u76d6\u516c\u5171\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u76f8\u540c\u914d\u7f6e\u9879\uff0c\u672a\u88ab\u8986\u76d6\u7684\u516c\u5171\u9879\u4ecd\u7136\u6709\u6548\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"How-To-Install",children:"\u5982\u4f55\u5b89\u88c5"}),"\n",(0,i.jsx)(n.p,{children:"\u7531\u4e8e profile \u662f\u5355\u72ec\u7684\u3001\u6309\u9700\u9009\u62e9\u7684\u529f\u80fd\u6a21\u5757\uff0c\u4f7f\u7528\u65f6\u9700\u8981\u5728 pom.xml \u4e2d\u5f15\u5165"}),"\n",(0,i.jsxs)(n.p,{children:["see ",(0,i.jsx)(n.a,{href:"https://central.sonatype.com/artifact/com.iohao.game/light-profile",children:"https://central.sonatype.com/artifact/com.iohao.game/light-profile"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependency>\n    <groupId>com.iohao.game</groupId>\n    <artifactId>light-profile</artifactId>\n    <version>${ioGame.version}</version>\n</dependency>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u4f60\u7684\u5e94\u7528\u4e0d\u662f spring \u9879\u76ee\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u9009\u62e9\u542f\u52a8\u914d\u7f6e\u73af\u5883 profile\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"code 5\uff0c\u52a0\u8f7d\u73af\u5883\u914d\u7f6e\u3002"}),"\n",(0,i.jsx)(n.li,{children:"code 8 ~ 10\uff0c\u8c03\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:'public class ProfileManagerTest {\n    @Test\n    public void profile() {\n        String profileConfigName = "local";\n        // highlight-next-line\n        ProfileManager.loadMainProfile(profileConfigName);\n\n        Profile profile = ProfileManager.profile();\n        // highlight-start\n        String jdbcDriver = profile.get("jdbcDriver");\n        boolean devMode = profile.getBool("devMode");\n        int maxVip = profile.getInt("maxVip");\n        // highlight-end\n\n        log.info("{} {} {}", jdbcDriver, devMode, maxVip);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"spring-example",children:"Spring Example"}),"\n",(0,i.jsxs)(n.p,{children:["\u5047\u8bbe\u4f60\u7684\u9879\u76ee\u90e8\u7f72\u5230\u4e86\u4f60\u7684 ",(0,i.jsx)(n.strong,{children:"local"})," \u670d\u52a1\u5668\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 JVM \u53c2\u6570 ",(0,i.jsx)(n.code,{children:"--iohao.profile=local"})," \u6765\u542f\u52a8\u5e94\u7528\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"java -jar yourApp.jar --iohao.profile=local\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Override\npublic void setEnvironment(Environment env) {\n  String profileConfigName = env.getProperty("iohao.profile");\n  ProfileManager.loadMainProfile(profileConfigName);\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>t});var r=o(6540);const i={},l=r.createContext(i);function s(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);